<div ng-cloak class="well main-box">
	<div class="row">
		<div class="col-md-12">
			<div class="logo"><h1>Warn a broda</h1></div>
			<!-- h1 translate="warning.title">Welcome, Warn A Broda!</h1-->
			<p class="lead" translate="warning.subtitle">Let your friend know something secretly</p>
			
			<div class="alert alert-danger" ng-show="error"
				translate="warning.error">
				<strong>Ups algum erro ocorreu!</strong>
			</div>
			<div class="alert alert-danger" ng-show="server_msg_danger">
				<strong>{{server_msg_danger}}</strong>
			</div>
			<div class="alert alert-success" ng-show="server_msg_sucess">
				<strong>{{server_msg_sucess}}</strong>
			</div>
			<div class="alert alert-danger" ng-show="email_error"
				translate="warning.invalid_email">
				<strong>Ups algum erro ocorreu!</strong>
			</div>
			<div class="alert alert-danger" ng-show="invalid_ddd"
				translate="warning.invalid_ddd">
				<strong>Ups algum erro ocorreu!</strong>
			</div>
			<div class="alert alert-danger" ng-show="invalid_facebook"
				translate="warning.invalid_facebook_link">
				<strong>Ups algum erro ocorreu!</strong>
			</div>
			<div class="alert alert-danger" ng-show="invalid_phone_number"
				translate="warning.invalid_phone_number">
				<strong>Ups algum erro ocorreu!</strong>
			</div>
			<div class="alert alert-danger" ng-show="invalid_whatsapp"
				translate="warning.invalid_whatsapp">
				<strong>Ups algum erro ocorreu!</strong>
			</div>
			


			<form name="form" role="form" novalidate
				class="ng-scope ng-invalid ng-invalid-required ng-dirty ng-valid-minlength"
				ng-submit="send()">

				<div class="form-group">
					<label translate="warning.amigo_voce">Amigo vocÃª: </label> 
					<select
						class="form-control" ng-model="warning.id_message"
						ng-options="m.id as m.name for m  in messages"
						required>
					</select>
				</div>

				<div class="form-group">
					<label translate="warning.tipo_notificacao">Notificar amigo via: </label> 
					<select class="form-control"
						ng-model="warning.id_contact_type"	
						ng-change="handleContactTypeSelect()"				
						ng-options="ct.id as ct.name for ct  in contactTypes"
						required>
					</select>					
				</div>

				<div class="form-group">
					<div ng-show="show_email">
						<label translate="warning.contact">Contato do amigo</label> 
						<br/>
						<input type="email" class="form-control" name="email" 
							ng-model="email" ng-minlength=5 ng-maxlength=100 ng-show="show_email"
							placeholder="{{'warning.placeholder.email' | translate}}"/>
					</div>
					<div ng-show="show_phone">
						<label translate="warning.contact">Contato do amigo</label>
						<br/>
						<input type="tel" class="form-control" ng-model="sms" id="sms-number" ng-show="show_phone"/>
					</div>
					<div ng-show="show_whats">
						<label translate="warning.contact">Contato do amigo</label> 
						<br/>
						<input type="tel" class="form-control" ng-model="whatsapp" ng-show="show_whats" id="mobile-number">
					</div>
				</div>
				

				<div class="modal-footer">
					<button type="submit" ng-disabled="form.$invalid || isPhoneNumberIlegal()" class="btn btn-success">
						<span translate="warning.warn">Avisar</span>
						<span class="glyphicon glyphicon-ok"></span> 						
					</button>					
				</div>
				
			</form>			
		</div>
	</div>
</div>
<script>
  	$("#mobile-number").intlTelInput({
	    autoFormat: true,
	    //autoHideDialCode: false,
	    defaultCountry: "auto",
	    //ipinfoToken: "yolo",
	    //nationalMode: false,
	    numberType: "MOBILE",
	    //onlyCountries: ['us', 'gb', 'ch', 'ca', 'do'],
	    preferredCountries: ['br', 'us'],
	    preventInvalidNumbers: true,
	    utilsScript: "scripts/utils.phone.jstxt"
  	});
  	$("#sms-number").intlTelInput({
	    autoFormat: true,
	    //autoHideDialCode: false,
	    defaultCountry: "auto",
	    //ipinfoToken: "yolo",
	    //nationalMode: false,
	    numberType: "MOBILE",
	    onlyCountries: ['br'],	    
	    preventInvalidNumbers: true,
	    utilsScript: "scripts/utils.phone.jstxt"
  	});
</script>

